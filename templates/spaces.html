{% extends 'base.html' %}

{% block content %}
{% load ss_admin_extras %}

<div id="filter_block">
    <div style="padding:10px;color:#222;">
        <div class="clearfix">
            <div style="display:inline-block;">
                <h6 style="display:inline-block;margin:0;">Filter spaces:</h6>
                <div class="btn-group">
                  <button class="btn btn-mini" disabled="disabled">ALL</button>
                  <button class="btn btn-mini">UPDATED</button>
                  <button class="btn btn-mini">APPROVED</button>
                </div>
            </div>
            <div style="display:inline-block; margin-left:30px;">
                <h6 style="display:inline-block;margin:0;">building</h6>
                <select class="building-location" style="font-size:11px; padding: 2px; line-height:24px; height:24px; margin:0;">

                    <option>---</option>
                    <optgroup label="A">

                        <option value="Alder Hall">Alder Hall</option>

                        <option value="Allen Library (ALB)">Allen Library (ALB)</option>

                        <option value="Allen Library (ALB) North">Allen Library (ALB) North</option>

                        <option value="Allen Library (ALB) South">Allen Library (ALB) South</option>

                        <option value="Architecture Hall (ARC)">Architecture Hall (ARC)</option>

                        <option value="Art Building (ART)">Art Building (ART)</option>

                    </optgroup>

                    <optgroup label="B">

                        <option value="Burke Memorial-Washington State Museum (BMM)">Burke Memorial-Washington State Museum (BMM)</option>

                    </optgroup>

                    <optgroup label="C">

                        <option value="Computer Science and Engineering Building (CSE)">Computer Science and Engineering Building (CSE)</option>

                    </optgroup>

                    <optgroup label="E">

                        <option value="Electrical Engineering Building (EEB)">Electrical Engineering Building (EEB)</option>

                        <option value="Engineering Library (ELB)">Engineering Library (ELB)</option>

                    </optgroup>

                    <optgroup label="F">

                        <option value="Fishery Sciences (FSH)">Fishery Sciences (FSH)</option>

                    </optgroup>

                    <optgroup label="G">

                        <option value="Gould Hall (GLD)">Gould Hall (GLD)</option>

                        <option value="Gowen Hall (GWN)">Gowen Hall (GWN)</option>

                    </optgroup>

                    <optgroup label="H">

                        <option value="Haggett Hall (HGT)">Haggett Hall (HGT)</option>

                        <option value="Hitchcock Hall (HCK)">Hitchcock Hall (HCK)</option>

                        <option value="Hutchinson Hall (HUT)">Hutchinson Hall (HUT)</option>

                    </optgroup>

                    <optgroup label="I">

                        <option value="Intramural Activities Building (IMA)">Intramural Activities Building (IMA)</option>

                    </optgroup>

                    <optgroup label="M">

                        <option value="Magnuson Health Sciences Center A (HSA)">Magnuson Health Sciences Center A (HSA)</option>

                        <option value="Magnuson Health Sciences Center C (HSC)">Magnuson Health Sciences Center C (HSC)</option>

                        <option value="Magnuson Health Sciences Center D (HSD)">Magnuson Health Sciences Center D (HSD)</option>

                        <option value="Magnuson Health Sciences Center E (HSE)">Magnuson Health Sciences Center E (HSE)</option>

                        <option value="Magnuson Health Sciences Center I (HSI)">Magnuson Health Sciences Center I (HSI)</option>

                        <option value="Magnuson Health Sciences Center T (HST)">Magnuson Health Sciences Center T (HST)</option>

                        <option value="Mary Gates Hall (MGH)">Mary Gates Hall (MGH)</option>

                        <option value="McCarty Hall (MCC)">McCarty Hall (MCC)</option>

                        <option value="McMahon Hall (MCM)">McMahon Hall (MCM)</option>

                        <option value="Miller Hall (MLR)">Miller Hall (MLR)</option>

                        <option value="Music Building (MUS)">Music Building (MUS)</option>

                    </optgroup>

                    <optgroup label="O">

                        <option value="Odegaard Undergraduate Library (OUGL)">Odegaard Undergraduate Library (OUGL)</option>

                    </optgroup>

                    <optgroup label="P">

                        <option value="Paccar Hall (PCAR)">Paccar Hall (PCAR)</option>

                        <option value="Padelford Hall (PDL)">Padelford Hall (PDL)</option>

                        <option value="Physics/Astronomy Building (PAB) Tower">Physics/Astronomy Building (PAB) Tower</option>

                        <option value="Poplar Hall (UTO)">Poplar Hall (UTO)</option>

                    </optgroup>

                    <optgroup label="S">

                        <option value="Social Work/Speech &amp; Hearing Sciences Building (SWS)">Social Work/Speech &amp; Hearing Sciences Building (SWS)</option>

                        <option value="South Campus Center (SOCC)">South Campus Center (SOCC)</option>

                        <option value="Suzzallo Library (SUZ)">Suzzallo Library (SUZ)</option>

                    </optgroup>

                    <optgroup label="W">

                        <option value="William H. Foege Genome Sciences (GNOM)">William H. Foege Genome Sciences (GNOM)</option>

                        <option value="William H. Gates Hall (LAW)">William H. Gates Hall (LAW)</option>

                    </optgroup>

                </select>
            </div>

            <div style="display:inline-block; border-left:solid 1px #bbb; padding-left:6px;" class="pull-right">
                <h6 style="display:inline-block;margin:0;">quick search</h6>
                <input id="search_single_spot_input" type="text" placeholder="Enter #id or space name" style="margin:0; font-size:11px; padding: 1px 3px;" data-provide="typeahead" data-items="10" data-source="[{% for space in spots %}{% if forloop.last %}&quot;{{space.id}} - {{space.name}}&quot;{% else %}&quot;{{space.id}} - {{space.name}}&quot;,{% endif %}{% endfor %}]">&nbsp;<a href="#" id="search_single_spot_button" class="btn btn-mini"><i class="icon-circle-arrow-up"></i> Search</a>
            </div>

        </div>

    </div>
</div>




<div class="table-container">
<form name="spaces" action="/space/" method="post">{% csrf_token %}

    <div class="table-options clearfix">
        <h5 class="pull-left" style="margin:0;">SPACES</h5>
        <div id="success_message" class="alert alert-success fade in pull-left" style="margin: 0 0 0 20px;">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Well done!</strong> You successfully completed a task.
        </div>
        <ul class="pull-right">
            <li><a href="/upload" id="batch_upload_button" class="btn btn-mini"><i class="icon-circle-arrow-up"></i> Batch Upload</a></li>
            <li><a href="/space/multiple" id="add_multiple_button" class="btn btn-mini"><i class="icon-plus-sign"></i> Multiple Spaces</a></li>
            <li><a href="/space/add" id="add_space_button" class="btn btn-mini"><i class="icon-plus-sign"></i> Individual Space</a></li>
        </ul>
    </div>

    <div id="table_scroller_container" class="tableDiv">
        <div class="fixedArea clearfix">
            <div class="fixedColumn" style="float: left;">
                <div class="fixedHead">
                    <table style="width:auto;">
                        <thead>
                            <!-- loop through schema? fixed table header for column titles -->
                            <tr>
                                <td id=""><div class="col-checkbox"><input id="check_all_checkbox" type="checkbox"></div></td>
                                {% for key in fixed_keys %}
                                <td id=""><div class="col-{{ key }}" >{{ key }}</div></td>
                                {% endfor %}
                                <td id=""><div class="col-action muted">Action</div></td>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="fixedTable" style="width: auto; overflow: hidden; border-collapse: collapse; padding: 0px;">
                    <table style="width:auto;">
                        <tbody>
                            <!-- loop of spaces -->
                            {% for space in spots %}
                            <tr id="spot_{{space.id}}_fixed">

                                <td id=""><div class="col-checkbox"><input type="checkbox" name="space_id" value="{{ space.id }}"></div></td>

                                {% for key in fixed_keys %}
                                    {% if key == "name" %}

                                        <!-- for now, look for specific words and apply the updates/queued labels to mimic status -->
                                        {% if "Area" in space|lookup:key %}
                                        <td id=""><div class="col-{{ key }}"><a href="/space/{{ space.id }}">{{ space|lookup:key }}</a> <span class="label">Updated</span></div></td>
                                        {% elif "Lounge" in space|lookup:key %}
                                        <td id=""><div class="col-{{ key }}" ><a href="/space/{{ space.id }}">{{ space|lookup:key }}</a> <span class="label label-warning">Approved</span></div></td>
                                        {% else %}
                                        <td id=""><div class="col-{{ key }}" ><a href="/space/{{ space.id }}">{{ space|lookup:key }}</a></div></td>
                                        {% endif %}

                                    {% else %}
                                    <td id=""><div class="col-{{ key }}">{{ space|lookup:key }}</div></td>
                                    {% endif %}
                                {% endfor %}

                                <!-- for now, look for specific words and apply the approve/publish buttons to mimic actions -->
                                {% if "Area" in space.name %}
                                <td id=""><div class="col-action" ><a href="#" id="" class="btn btn-mini">Approve</a></div></td>
                                {% elif "Lounge" in space.name %}
                                <td id=""><div class="col-action" ><a href="#" id="" class="btn btn-mini btn-success">Publish</a></div></td>
                                {% else %}
                                <td id=""><div  class="col-action">&nbsp;</div></td>
                                {% endif %}

                            </tr>
                            {% endfor %}
                            <!-- end loop -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="fixedContainer" style="float: left; overflow:hidden;">
                <div class="fixedHead" style="float: left; overflow: hidden;">
                    <table style="width: auto;">
                        <thead>
                            <!-- loop through schema? fixed table header for column titles -->
                            <tr>
                                {% for key in scrollable_keys %}
                                <td><div  class="col-{{ key }}">{{ key }}</div></td>
                                {% endfor %}
                            </tr>
                        </thead>
                    </table>
                </div>

                <div id="table_scroller" class="fixedTable" style="float: left;  overflow: auto;">
                    <table class="FixedTables" style="width: auto;">
                        <caption class="visuallyhidden">List of Spaces</caption>
                        <tbody id="space_list_body">
                            <!-- loop  of spaces -->
                            {% for space in spots %}
                            <tr id="spot_{{space.id}}_scroll">
                                {% for key in scrollable_keys %}
                                    {% if space|lookup:key|classname == 'list' %}
                                    <!-- TODO: if list is detected, loop over it to create a nicer looking list -->
                                    <td id=""><div class="col-{{ key }}" >{% for t in space|lookup:key %}{% if not forloop.first %}, {% endif %}{{ t }}{% endfor %}{% if not space|lookup:key %}&nbsp;{% endif %}</div></td>
                                    {% else %}
                                    <td id=""><div class="col-{{ key }}" >{{ space|lookup:key }}{% if not space|lookup:key %}&nbsp;{% endif %}</div></td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                            {% endfor %}
                            <!-- end loop -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="table-sub-options clearfix">
        <ul class="pull-left">
            <li><button id="edit_button" class="btn btn-mini btn-primary" type="submit"><i class="icon-edit icon-white"></i> Edit Multiple</button></li>
            <li><button id="edit_button" class="btn btn-mini btn-default disabled" type="submit">Approve All</button></li>
            <li><button id="edit_button" class="btn btn-mini btn-success disabled" type="submit">Publish All</button></li>
        </ul>
        <ul class="pull-right">
            <li id="table_num_spaces">10 spaces</li>
            <li><a href='/download' id="export_button" class="btn btn-mini"><i class="icon-circle-arrow-right"></i> Export Selected</a></li>
        </ul>
    </div>

    <input type="hidden" id="checked_spaces_count" name="checked_spaces">

</form>
</div>

{% endblock %}
